!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/",n(n.s=0)}([function(e,t,n){n(1);const r=annyang;e.exports=class{constructor(e){this.latLng=[],navigator.geolocation.getCurrentPosition(e=>{this.latLng=[e.coords.latitude,e.coords.longitude]}),this.commands=e,this.commands&&this.init()}say(e,t){"object"==typeof e&&(e=e[Math.floor(Math.random()*e.length)]),this.dispatch("say",e,()=>{"function"==typeof t&&t()})}dispatch(e,t,n){const o=new XMLHttpRequest;o.open("GET","http://localhost:8025/?task="+e+"&data="+t,!0),o.onreadystatechange=(()=>{4==o.readyState&&200==o.status&&"function"==typeof n&&n(o.responseText),r.start()}),r.abort(),o.send()}externalDispatch(e,t){const n=new XMLHttpRequest;n.open("GET",e,!0),n.onreadystatechange=(()=>{4==n.readyState&&200==n.status&&"function"==typeof t&&t(n.responseText),r.start()}),r.abort(),n.send()}listenForCommands(){r.removeCallback("result"),r.addCallback("result",e=>{let t=e[0].toLowerCase().trim();t.replace("alex","").length&&(t=t.replace("alex",""));let n=!1,r=[],o=[];Object.keys(this.commands).map(a=>{r=this.commands[a],o=r.commands,!0!==n&&Object.keys(o).map(a=>{!0!==n&&-1!==t.indexOf(o[a])&&("function"==typeof r.onMatch&&r.onMatch(t,o[a],e),n=!0)})})}),r.start()}listenForFeedback(e,t){t=Object.assign({retry:3,retryInterval:1e4,retryMessages:[],givenupMessages:["Perhaps we should try this again later."],cancels:[],cancelMessages:["Ok.","Sure.","Absolutly.","Stopped."]},t);let n=void 0;t.retryMessages.length&&(n=setTimeout(()=>{let r=t.retryMessages[Math.floor(Math.random()*t.retryMessages.length)];0===t.retry&&(r=t.givenupMessages[Math.floor(Math.random()*t.givenupMessages.length)]),this.dispatch("error",r,()=>{t.retry>0?("int"==typeof t.retry&&(t.retry=t.retry-1),this.listenForFeedback(e,t)):(clearTimeout(n),this.listenForCommands())})},t.retryInterval)),r.removeCallback("result"),r.addCallback("result",r=>{r=r[0].toLowerCase().trim();let o=!1;t.cancels.length&&Object.keys(t.cancels).map(e=>{-1!==r.indexOf(t.cancels[e])&&(o=!0)}),"function"==typeof e&&(clearTimeout(n),o?this.dispatch("error",t.cancelMessages[Math.floor(Math.random()*t.cancelMessages.length)],()=>{this.listenForCommands()}):e(r))}),r.start()}init(){this.listenForCommands()}}},function(e,t,n){"use strict";var r,o,a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};o="undefined"!=typeof window?window:void 0,void 0===(r=function(){return o.annyang=function(e,t){var n,r=e.SpeechRecognition||e.webkitSpeechRecognition||e.mozSpeechRecognition||e.msSpeechRecognition||e.oSpeechRecognition;if(!r)return null;var o,s,i=[],c={start:[],error:[],end:[],soundstart:[],result:[],resultMatch:[],resultNoMatch:[],errorNetwork:[],errorPermissionBlocked:[],errorPermissionDenied:[]},l=0,u=0,f=!1,d="font-weight: bold; color: #00f;",p=!1,g=!1,h=/\s*\((.*?)\)\s*/g,m=/(\(\?:[^)]+\))\?/g,y=/(\(\?)?:\w+/g,b=/\*\w+/g,v=/[\-{}\[\]+?.,\\\^$|#]/g,w=function(e){for(var t=arguments.length,n=Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];e.forEach(function(e){e.callback.apply(e.context,n)})},M=function(){return o!==t},k=function(e,t){-1!==e.indexOf("%c")||t?console.log(e,t||d):console.log(e)},S=function(){M()||n.init({},!1)},x=function(e,t,n){i.push({command:e,callback:t,originalPhrase:n}),f&&k("Command successfully loaded: %c"+n,d)},C=function(e){var t;w(c.result,e);for(var n=0;n<e.length;n++){t=e[n].trim(),f&&k("Speech recognized: %c"+t,d);for(var r=0,o=i.length;r<o;r++){var a=i[r],s=a.command.exec(t);if(s){var l=s.slice(1);return f&&(k("command matched: %c"+a.originalPhrase,d),l.length&&k("with parameters",l)),a.callback.apply(this,l),void w(c.resultMatch,t,a.originalPhrase,e)}}}w(c.resultNoMatch,e)};return n={init:function(a){var d=!(1<arguments.length&&arguments[1]!==t)||arguments[1];o&&o.abort&&o.abort(),(o=new r).maxAlternatives=5,o.continuous="http:"===e.location.protocol,o.lang="en-US",o.onstart=function(){g=!0,w(c.start)},o.onsoundstart=function(){w(c.soundstart)},o.onerror=function(e){switch(w(c.error,e),e.error){case"network":w(c.errorNetwork,e);break;case"not-allowed":case"service-not-allowed":s=!1,(new Date).getTime()-l<200?w(c.errorPermissionBlocked,e):w(c.errorPermissionDenied,e)}},o.onend=function(){if(g=!1,w(c.end),s){var e=(new Date).getTime()-l;(u+=1)%10==0&&f&&k("Speech Recognition is repeatedly stopping and starting. See http://is.gd/annyang_restarts for tips."),e<1e3?setTimeout(function(){n.start({paused:p})},1e3-e):n.start({paused:p})}},o.onresult=function(e){if(p)return f&&k("Speech heard, but annyang is paused"),!1;for(var t=e.results[e.resultIndex],n=[],r=0;r<t.length;r++)n[r]=t[r].transcript;C(n)},d&&(i=[]),a.length&&this.addCommands(a)},start:function(e){S(),p=(e=e||{}).paused!==t&&!!e.paused,s=e.autoRestart===t||!!e.autoRestart,e.continuous!==t&&(o.continuous=!!e.continuous),l=(new Date).getTime();try{o.start()}catch(e){f&&k(e.message)}},abort:function(){s=!1,u=0,M()&&o.abort()},pause:function(){p=!0},resume:function(){n.start()},debug:function(){var e=!(0<arguments.length&&arguments[0]!==t)||arguments[0];f=!!e},setLanguage:function(e){S(),o.lang=e},addCommands:function(t){var n,r;for(var o in S(),t)if(t.hasOwnProperty(o))if("function"==typeof(n=e[t[o]]||t[o]))x((r=(r=o).replace(v,"\\$&").replace(h,"(?:$1)?").replace(y,function(e,t){return t?e:"([^\\s]+)"}).replace(b,"(.*?)").replace(m,"\\s*$1?\\s*"),new RegExp("^"+r+"$","i")),n,o);else{if(!("object"===(void 0===n?"undefined":a(n))&&n.regexp instanceof RegExp)){f&&k("Can not register command: %c"+o,d);continue}x(new RegExp(n.regexp.source,"i"),n.callback,o)}},removeCommands:function(e){e===t?i=[]:(e=Array.isArray(e)?e:[e],i=i.filter(function(t){for(var n=0;n<e.length;n++)if(e[n]===t.originalPhrase)return!1;return!0}))},addCallback:function(n,r,o){var a=e[r]||r;"function"==typeof a&&c[n]!==t&&c[n].push({callback:a,context:o||this})},removeCallback:function(e,n){var r=function(e){return e.callback!==n};for(var o in c)c.hasOwnProperty(o)&&(e!==t&&e!==o||(c[o]=n===t?[]:c[o].filter(r)))},isListening:function(){return g&&!p},getSpeechRecognizer:function(){return o},trigger:function(e){n.isListening()?(Array.isArray(e)||(e=[e]),C(e)):f&&k(g?"Speech heard, but annyang is paused":"Cannot trigger while annyang is aborted")}}}(o)}.apply(t,[]))||(e.exports=r)}]);